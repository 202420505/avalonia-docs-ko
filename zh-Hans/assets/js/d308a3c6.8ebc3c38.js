"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[7583],{79705:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"components/webview/interop/environment-options","title":"WebView Environment Options","description":"Overview","source":"@site/accelerate/components/webview/interop/environment-options.md","sourceDirName":"components/webview/interop","slug":"/components/webview/interop/environment-options","permalink":"/zh-Hans/accelerate/components/webview/interop/environment-options","draft":false,"unlisted":false,"editUrl":"https://github.com/AvaloniaUI/avalonia-docs/tree/main/accelerate/components/webview/interop/environment-options.md","tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"Frequently Asked Questions","permalink":"/zh-Hans/accelerate/components/webview/faq"},"next":{"title":"Native Browser interop","permalink":"/zh-Hans/accelerate/components/webview/interop/native-browser-interop"}}');var r=i(74848),t=i(28453);const o={},a="WebView Environment Options",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Base Class Properties",id:"base-class-properties",level:2},{value:"WebViewEnvironmentRequestedEventArgs",id:"webviewenvironmentrequestedeventargs",level:3},{value:"Platform-Specific Options",id:"platform-specific-options",level:2},{value:"Windows WebView2",id:"windows-webview2",level:3},{value:"macOS/iOS (WKWebView)",id:"macosios-wkwebview",level:3},{value:"Linux (GTK WebKit)",id:"linux-gtk-webkit",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"webview-environment-options",children:"WebView Environment Options"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The WebView environment options allow you to customize the underlying browser engine before it's initialized. This is essential for configuring browser-specific settings like developer tools, private browsing, user data directories, and other platform-specific features that must be set during creation."}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"EnvironmentRequested"})," event is fired before the WebView adapter is created, giving you the opportunity to modify these settings based on your application's requirements."]}),"\n",(0,r.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var webView = new WebView();\nwebView.EnvironmentRequested += (sender, args) =>\n{\n    // Enable developer tools for all platforms\n    args.EnableDevTools = true;\n    \n    // Platform-specific configuration\n    switch (args)\n    {\n        case WindowsWebView2EnvironmentRequestedEventArgs webView2Args:\n            webView2Args.IsInPrivateModeEnabled = true;\n            break;\n        case AppleWKWebViewEnvironmentRequestedEventArgs appleArgs:\n            appleArgs.NonPersistentDataStore = true;\n            break;\n        case GtkWebViewEnvironmentRequestedEventArgs gtkArgs:\n            gtkArgs.EphemeralDataManager = true;\n            break;\n    }\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"base-class-properties",children:"Base Class Properties"}),"\n",(0,r.jsx)(n.h3,{id:"webviewenvironmentrequestedeventargs",children:"WebViewEnvironmentRequestedEventArgs"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Properties:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"EnableDevTools"})," (bool): Controls whether users can open DevTools via context menu or keyboard shortcuts. Available on all platforms."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"platform-specific-options",children:"Platform-Specific Options"}),"\n",(0,r.jsx)(n.h3,{id:"windows-webview2",children:"Windows WebView2"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Properties:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ExplicitEnvironment"}),": Use an existing ICoreWebView2Environment COM handle"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ProfileName"}),": Set a custom browser profile name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BrowserExecutableFolder"}),": Specify Edge browser executable location"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"UserDataFolder"}),": Define where user data is stored"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"AdditionalBrowserArguments"}),": Pass custom Chromium command-line flags"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Language"}),": Set browser UI language (BCP 47 format)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"IsInPrivateModeEnabled"}),": Enable private browsing mode"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'webView.EnvironmentRequested += (sender, args) =>\n{\n    if (args is WindowsWebView2EnvironmentRequestedEventArgs webView2)\n    {\n        webView2.ProfileName = "AvaloniaUser";\n        webView2.UserDataFolder = Path.Combine(AppContext.BaseDirectory, "webview");\n    }\n};\n'})}),"\n",(0,r.jsx)(n.h3,{id:"macosios-wkwebview",children:"macOS/iOS (WKWebView)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Properties:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"NonPersistentDataStore"}),": Use memory-only data storage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DataStoreIdentifier"}),": Set unique identifier for persistent data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ApplicationNameForUserAgent"}),": Customize user agent application name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"UpgradeKnownHostsToHTTPS"}),": Automatically upgrade HTTP to HTTPS"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"LimitsNavigationsToAppBoundDomains"}),": Restrict navigation to app domains"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'webView.EnvironmentRequested += (sender, args) =>\n{\n    if (args is AppleWKWebViewEnvironmentRequestedEventArgs wkWebView)\n    {\n        wkWebView.NonPersistentDataStore = true;\n        wkWebView.ApplicationNameForUserAgent = "Avalonia WebView Sample";\n    }\n};\n'})}),"\n",(0,r.jsx)(n.h3,{id:"linux-gtk-webkit",children:"Linux (GTK WebKit)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Properties:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ApplicationNameForUserAgent"}),": Customize user agent application name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ExperimentalOffscreen"}),": Enable experimental offscreen rendering"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"EphemeralDataManager"}),": Use non-persistent data storage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BaseDataDirectory"}),": Set base directory for website data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BaseCacheDirectory"}),": Set base directory for cache"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SharedProcessModel"}),": Use shared process for all WebView instances"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DisableCache"}),": Completely disable caching for memory optimization"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"webView.EnvironmentRequested += (sender, args) =>\n{\n    if (args is GtkWebViewEnvironmentRequestedEventArgs gtkArgs)\n    {\n        gtkArgs.EphemeralDataManager = true;\n        gtkArgs.EnableDevTools = true;\n    }\n};\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(96540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);