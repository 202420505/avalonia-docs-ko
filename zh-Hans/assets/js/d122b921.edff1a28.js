"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[2578],{79405:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"components/webview/nativewebview","title":"NativeWebView","description":"Overview","source":"@site/accelerate/components/webview/nativewebview.md","sourceDirName":"components/webview","slug":"/components/webview/nativewebview","permalink":"/zh-Hans/accelerate/components/webview/nativewebview","draft":false,"unlisted":false,"editUrl":"https://github.com/AvaloniaUI/avalonia-docs/tree/main/accelerate/components/webview/nativewebview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"WebView Quick Start Guide","permalink":"/zh-Hans/accelerate/components/webview/quickstart"},"next":{"title":"NativeWebDialog","permalink":"/zh-Hans/accelerate/components/webview/nativewebdialog"}}');var r=a(74848),t=a(28453);const s={},d="NativeWebView",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Properties",id:"properties",level:2},{value:"Source",id:"source",level:3},{value:"CanGoBack",id:"cangoback",level:3},{value:"CanGoForward",id:"cangoforward",level:3},{value:"Events",id:"events",level:2},{value:"AdapterCreated",id:"adaptercreated",level:3},{value:"AdapterDestroyed",id:"adapterdestroyed",level:3},{value:"EnvironmentRequested",id:"environmentrequested",level:3},{value:"NavigationCompleted",id:"navigationcompleted",level:3},{value:"NavigationStarted",id:"navigationstarted",level:3},{value:"NewWindowRequested",id:"newwindowrequested",level:3},{value:"WebMessageReceived",id:"webmessagereceived",level:3},{value:"WebResourceRequested",id:"webresourcerequested",level:3},{value:"Usage Example",id:"usage-example",level:4},{value:"Methods",id:"methods",level:2},{value:"Navigate",id:"navigate",level:3},{value:"NavigateToString",id:"navigatetostring",level:3},{value:"InvokeScript",id:"invokescript",level:3},{value:"Usage Example",id:"usage-example-1",level:4},{value:"GoBack",id:"goback",level:3},{value:"GoForward",id:"goforward",level:3},{value:"Refresh",id:"refresh",level:3},{value:"Stop",id:"stop",level:3},{value:"TryGetCommandManager",id:"trygetcommandmanager",level:3},{value:"Usage Example",id:"usage-example-2",level:4},{value:"TryGetCookieManager",id:"trygetcookiemanager",level:3},{value:"Usage Example",id:"usage-example-3",level:4},{value:"TryGetPlatformHandle",id:"trygetplatformhandle",level:3},{value:"BeginReparenting",id:"beginreparenting",level:3},{value:"BeginReparentingAsync",id:"beginreparentingasync",level:3},{value:"Platform Support",id:"platform-support",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"nativewebview",children:"NativeWebView"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"NativeWebView"})," is a control that provides a native web browser implementation for Avalonia and WPF applications. It wraps platform-specific web controls and provides a unified API for web browsing functionality."]}),"\n",(0,r.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(n.h3,{id:"source",children:"Source"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public Uri Source { get; set; }\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The URI of the top-level document displayed in the WebView. Setting this property is equivalent to calling ",(0,r.jsx)(n.code,{children:"Navigate()"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Default value: ",(0,r.jsx)(n.code,{children:"about:blank"})]}),"\n",(0,r.jsx)(n.h3,{id:"cangoback",children:"CanGoBack"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public bool CanGoBack { get; }\n"})}),"\n",(0,r.jsx)(n.p,{children:"Indicates whether the WebView can navigate to a previous page in the navigation history."}),"\n",(0,r.jsx)(n.h3,{id:"cangoforward",children:"CanGoForward"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public bool CanGoForward { get; }\n"})}),"\n",(0,r.jsx)(n.p,{children:"Indicates whether the WebView can navigate to a next page in the navigation history."}),"\n",(0,r.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,r.jsx)(n.h3,{id:"adaptercreated",children:"AdapterCreated"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public event EventHandler<WebViewAdapterEventArgs>? AdapterCreated;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fires after underlying webview adapter was initialized."}),"\n",(0,r.jsx)(n.h3,{id:"adapterdestroyed",children:"AdapterDestroyed"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public event EventHandler<WebViewNavigationCompletedEventArgs>? AdapterDestroyed;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fires after underlying webview adapter was destroyed."}),"\n",(0,r.jsx)(n.h3,{id:"environmentrequested",children:"EnvironmentRequested"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public event EventHandler<WebViewEnvironmentRequestedEventArgs>? EnvironmentRequested;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fired before the underlying webview adapter is created, allowing customization of the webview environment.\nUse this event to modify environment options (such as enabling private mode or dev tools) before the webview is initialized.\nThe event argument type depends on the platform."}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"/zh-Hans/accelerate/components/webview/interop/environment-options",children:"WebView Environment Options"})," for more details."]}),"\n",(0,r.jsx)(n.h3,{id:"navigationcompleted",children:"NavigationCompleted"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public event EventHandler<WebViewNavigationCompletedEventArgs>? NavigationCompleted;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fires after navigation of the top-level document completes rendering, either successfully or unsuccessfully."}),"\n",(0,r.jsx)(n.h3,{id:"navigationstarted",children:"NavigationStarted"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public event EventHandler<WebViewNavigationStartingEventArgs>? NavigationStarted;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fires before a new navigation starts for the top-level document."}),"\n",(0,r.jsx)(n.h3,{id:"newwindowrequested",children:"NewWindowRequested"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public event EventHandler<WebViewNewWindowRequestedEventArgs>? NewWindowRequested;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fires before a new navigate starts for the top level document."}),"\n",(0,r.jsx)(n.h3,{id:"webmessagereceived",children:"WebMessageReceived"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public event EventHandler<WebMessageReceivedEventArgs>? WebMessageReceived;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Fires after web content sends a message to the app host via ",(0,r.jsx)(n.code,{children:"invokeCSharpAction(body)"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"webresourcerequested",children:"WebResourceRequested"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public event EventHandler<WebResourceRequestedEventArgs>? WebResourceRequested;\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fires when the WebView is performing a URL request to a matching URL.\nArguments include request information, and headers dictionary."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Headers dictionary can be readonly depending on the request or platform.\nAlways check result of the ",(0,r.jsx)(n.code,{children:"TrySet"})," and ",(0,r.jsx)(n.code,{children:"TryRemove"})," methods."]})}),"\n",(0,r.jsx)(n.h4,{id:"usage-example",children:"Usage Example"}),"\n",(0,r.jsx)(n.p,{children:"Bi-directional JS<->C# communication example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'private async void NativeWebView_OnNavigationCompleted(object? sender, WebViewNavigationCompletedEventArgs e)\n{\n    await ((NativeWebView)sender!).InvokeScript(""" invokeCSharpAction("{\'key\': 10}") """);\n}\n\nprivate void NativeWebView_OnWebMessageReceived(object? sender, WebMessageReceivedEventArgs e)\n{\n    var message = e.Body;\n    // message == "{\'key\': 10}"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h3,{id:"navigate",children:"Navigate"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public void Navigate(Uri url)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Navigates the WebView to the specified URI."}),"\n",(0,r.jsx)(n.h3,{id:"navigatetostring",children:"NavigateToString"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public void NavigateToString(string text)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Renders the provided HTML string as the top-level document."}),"\n",(0,r.jsx)(n.h3,{id:"invokescript",children:"InvokeScript"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public Task<string?> InvokeScript(string scriptName)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Executes the provided JavaScript in the top-level document."}),"\n",(0,r.jsx)(n.h4,{id:"usage-example-1",children:"Usage Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<NativeWebView Source="https://avaloniaui.net/" NavigationCompleted="WebView_NavigationCompleted" />\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"private async void WebView_NavigationCompleted(object? sender, WebViewNavigationCompletedEventArgs args)\n{\n    // Execute JavaScript\n    await webView.InvokeScript(\"alert('Hello World')\");\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"goback",children:"GoBack"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public bool GoBack()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Navigates to the previous page in navigation history. Returns ",(0,r.jsx)(n.code,{children:"false"})," if navigation is not possible."]}),"\n",(0,r.jsx)(n.h3,{id:"goforward",children:"GoForward"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public bool GoForward()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Navigates to the next page in navigation history. Returns ",(0,r.jsx)(n.code,{children:"false"})," if navigation is not possible."]}),"\n",(0,r.jsx)(n.h3,{id:"refresh",children:"Refresh"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public bool Refresh()\n"})}),"\n",(0,r.jsx)(n.p,{children:"Reloads the current page."}),"\n",(0,r.jsx)(n.h3,{id:"stop",children:"Stop"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public bool Stop()\n"})}),"\n",(0,r.jsx)(n.p,{children:"Stops any ongoing navigation."}),"\n",(0,r.jsx)(n.h3,{id:"trygetcommandmanager",children:"TryGetCommandManager"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public NativeWebViewCommandManager? TryGetCommandManager()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns an instance of ",(0,r.jsx)(n.code,{children:"NativeWebViewCommandManager"})," for executing common keyboard commands if supported by the platform."]}),"\n",(0,r.jsx)(n.h4,{id:"usage-example-2",children:"Usage Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var commandManager = webView.TryGetCommandManager();\nif (commandManager != null)\n{\n    // Copy selected content\n    commandManager.Copy();\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"trygetcookiemanager",children:"TryGetCookieManager"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public NativeWebViewCookieManager? TryGetCookieManager()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns an instance of ",(0,r.jsx)(n.code,{children:"NativeWebViewCookieManager"})," for managing cookies if supported by the platform."]}),"\n",(0,r.jsx)(n.h4,{id:"usage-example-3",children:"Usage Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var cookieManager = webView.TryGetCookieManager();\nif (cookieManager != null)\n{\n    // Get all cookies\n    var cookies = await cookieManager.GetCookiesAsync();\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"trygetplatformhandle",children:"TryGetPlatformHandle"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public IPlatformHandle? TryGetPlatformHandle()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns a platform handle of the native control for accessing platform-specific APIs.\nSee ",(0,r.jsx)(n.a,{href:"/zh-Hans/accelerate/components/webview/interop/native-browser-interop",children:"Native Browser interop"})," for details."]}),"\n",(0,r.jsx)(n.h3,{id:"beginreparenting",children:"BeginReparenting"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public IDisposable BeginReparenting(bool yieldOnLayoutBeforeExiting = true)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Delays destruction of the native control during parent changes."}),"\n",(0,r.jsx)(n.h3,{id:"beginreparentingasync",children:"BeginReparentingAsync"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"public IAsyncDisposable BeginReparentingAsync()\n"})}),"\n",(0,r.jsx)(n.p,{children:"Asynchronously delays destruction of the native control during parent changes."}),"\n",(0,r.jsx)(n.h2,{id:"platform-support",children:"Platform Support"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feature"}),(0,r.jsx)(n.th,{children:"Windows WebView2-Edge"}),(0,r.jsx)(n.th,{children:"Linux"}),(0,r.jsx)(n.th,{children:"macOS/iOS WKWebView"}),(0,r.jsx)(n.th,{children:"Android"}),(0,r.jsx)(n.th,{children:"Browser"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"NativeWebView"})}),(0,r.jsx)(n.td,{children:"\u2714"}),(0,r.jsx)(n.td,{children:"\u2716"}),(0,r.jsx)(n.td,{children:"\u2714"}),(0,r.jsx)(n.td,{children:"\u2714"}),(0,r.jsx)(n.td,{children:"\u2716*"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TryGetCommandManager"})}),(0,r.jsx)(n.td,{children:"\u2714"}),(0,r.jsx)(n.td,{children:"\u2716"}),(0,r.jsx)(n.td,{children:"\u2714"}),(0,r.jsx)(n.td,{children:"\u2714"}),(0,r.jsx)(n.td,{children:"\u2716*"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TryGetCookieManager"})}),(0,r.jsx)(n.td,{children:"\u2714"}),(0,r.jsx)(n.td,{children:"\u2716"}),(0,r.jsx)(n.td,{children:"\u2714"}),(0,r.jsx)(n.td,{children:"\u2716"}),(0,r.jsx)(n.td,{children:"\u2716*"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"* Support is possible, but wasn't implemented yet. Let us know if it's a blocker for you."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["For Linux support, please use ",(0,r.jsx)(n.a,{href:"/zh-Hans/accelerate/components/webview/nativewebdialog",children:"NativeWebDialog"})]})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>d});var i=a(96540);const r={},t=i.createContext(r);function s(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);