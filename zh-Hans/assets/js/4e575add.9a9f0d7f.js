"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[1088],{39991:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"guides/custom-controls/defining-properties","title":"Defining Properties","description":"If you are creating a custom control, you will usually want it to have properties that can be set by the Avalonia UI styling system.","source":"@site/docs/guides/custom-controls/defining-properties.md","sourceDirName":"guides/custom-controls","slug":"/guides/custom-controls/defining-properties","permalink":"/zh-Hans/docs/guides/custom-controls/defining-properties","draft":false,"unlisted":false,"editUrl":"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/guides/custom-controls/defining-properties.md","tags":[],"version":"current","lastUpdatedBy":"202420505","lastUpdatedAt":1755588461000,"frontMatter":{"id":"defining-properties","title":"Defining Properties"},"sidebar":"documentationSidebar","previous":{"title":"How To Create a Custom Panel","permalink":"/zh-Hans/docs/guides/custom-controls/create-a-custom-panel"},"next":{"title":"Draw with a Property","permalink":"/zh-Hans/docs/guides/custom-controls/draw-with-a-property"}}');var o=t(74848),r=t(28453);const s="data:image/png;base64,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",l={id:"defining-properties",title:"Defining Properties"},a="Styled Property",c={},p=[{value:"Register a Styled Property",id:"register-a-styled-property",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"styled-property",children:"Styled Property"})}),"\n",(0,o.jsxs)(n.p,{children:["If you are creating a custom control, you will usually want it to have properties that can be set by the ",(0,o.jsx)(n.em,{children:"Avalonia UI"})," styling system."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["For more information about how to use styles in ",(0,o.jsx)(n.em,{children:"Avalonia UI"}),", see the guide ",(0,o.jsx)(n.a,{href:"../../basics/user-interface/styling",children:"here"}),"."]})}),"\n",(0,o.jsxs)(n.p,{children:["On this page, you will see how to implement a property so that it can be changed by the ",(0,o.jsx)(n.em,{children:"Avalonia UI"})," styling system. This is a two step process:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Register a styled property."}),"\n",(0,o.jsx)(n.li,{children:"Provide the getter/setter for the property."}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"register-a-styled-property",children:"Register a Styled Property"}),"\n",(0,o.jsxs)(n.p,{children:["You register a styled property by defining a static read-only field and using the ",(0,o.jsx)(n.code,{children:"AvaloniaProperty.Register"})," method."]}),"\n",(0,o.jsx)(n.p,{children:"There is a convention for the name of a property. It must follow the pattern:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-csharp",children:"[AttributeName]Property\n"})}),"\n",(0,o.jsxs)(n.p,{children:["This means that ",(0,o.jsx)(n.em,{children:"Avalonia UI"})," will look for an attribute in the XAML, like this:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<MyCustomControl AttributeName="value" ... >\n'})}),"\n",(0,o.jsx)(n.p,{children:"For example, with a styled property in place, you can control the background color of the custom control from the window styles collection:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",metastring:"title='MainWindow.axaml'",children:'<Window xmlns="https://github.com/avaloniaui"\n        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\n        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"\n        xmlns:cc="using:AvaloniaCCExample.CustomControls"\n        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"\n        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"\n        x:Class="AvaloniaCCExample.MainWindow"\n        Title="Avalonia Custom Control">\n\n  <Window.Styles>\n    <Style Selector="cc|MyCustomControl">\n      <Setter Property="Background" Value="Yellow"/>\n    </Style>\n  </Window.Styles>\n\n  <cc:MyCustomControl Height="200" Width="300"/>\n\n</Window>\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-csharp",metastring:"title='MyCustomControl.cs'",children:"using Avalonia;\nusing Avalonia.Controls;\nusing Avalonia.Media;\n\nnamespace AvaloniaCCExample.CustomControls\n{\n    public class MyCustomControl : Control\n    {\n        public static readonly StyledProperty<IBrush?> BackgroundProperty =\n            Border.BackgroundProperty.AddOwner<MyCustomControl>();\n\n        public IBrush? Background\n        {\n            get { return GetValue(BackgroundProperty); }\n            set { SetValue(BackgroundProperty, value); }\n        }\n\n        public sealed override void Render(DrawingContext context)\n        {\n            if (Background != null)\n            {\n                var renderSize = Bounds.Size;\n                context.FillRectangle(Background, new Rect(renderSize));\n            }\n            base.Render(context);\n        }\n    }\n}\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Note that the getter/setter of the property uses the special Avalonia UI ",(0,o.jsx)(n.code,{children:"GetValue"})," and ",(0,o.jsx)(n.code,{children:"SetValue"})," methods."]})}),"\n",(0,o.jsx)(n.p,{children:"The styled property will work both at run-time and in the preview panel."}),"\n",(0,o.jsx)("img",{src:s,alt:""}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["For more advanced information about how to create a custom control, see ",(0,o.jsx)(n.a,{href:"/zh-Hans/docs/guides/custom-controls/how-to-create-advanced-custom-controls",children:"here"}),"."]})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var i=t(96540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);