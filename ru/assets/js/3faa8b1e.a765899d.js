"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[7450],{93887:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"tutorials/music-store-app/mock-search","title":"Mock Search","description":"TUTORIALS - Music Store App","source":"@site/docs/tutorials/music-store-app/mock-search.md","sourceDirName":"tutorials/music-store-app","slug":"/tutorials/music-store-app/mock-search","permalink":"/ru/docs/tutorials/music-store-app/mock-search","draft":false,"unlisted":false,"editUrl":"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/tutorials/music-store-app/mock-search.md","tags":[],"version":"current","lastUpdatedBy":"202420505","lastUpdatedAt":1755588461000,"frontMatter":{"description":"TUTORIALS - Music Store App"},"sidebar":"documentationSidebar","previous":{"title":"Add Dialog Content","permalink":"/ru/docs/tutorials/music-store-app/add-content-to-dialog"},"next":{"title":"Album View","permalink":"/ru/docs/tutorials/music-store-app/album-view"}}');var s=n(74848),o=n(28453);const l=n.p+"assets/images/text-list-c02ea382366c5c5f266e1faa6fe4d351.png",r={description:"TUTORIALS - Music Store App"},a="Mock Search",c={},d=[{value:"MVVM Toolkit View Model",id:"mvvm-toolkit-view-model",level:2},{value:"Data Binding",id:"data-binding",level:2},{value:"Album Search and Selection",id:"album-search-and-selection",level:2},{value:"Mock Data",id:"mock-data",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"mock-search",children:"Mock Search"})}),"\n",(0,s.jsx)(t.p,{children:"On this page you will create the view model for the album search feature, and then bind it to the controls on the new user control. At this stage you will use a mock of the search itself, so that you can concentrate on the view model."}),"\n",(0,s.jsx)(t.h2,{id:"mvvm-toolkit-view-model",children:"MVVM Toolkit View Model"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.em,{children:"CommunityToolkit.Mvvm"})," framework provides ",(0,s.jsx)(t.em,{children:"Avalonia UI"})," with support for its data binding system. You add this support by deriving your view model from the ",(0,s.jsx)(t.code,{children:"ObservableObject"})," class, via the ",(0,s.jsx)(t.code,{children:"ViewModelBase"})," class that was added to your project at the start, by the solution template."]}),"\n",(0,s.jsxs)(t.p,{children:["Follow this procedure to derive from the ",(0,s.jsx)(t.code,{children:"ObservableObject"})," class:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Locate and open the ",(0,s.jsx)(t.strong,{children:"MusicStoreViewModel.cs"})," file."]}),"\n",(0,s.jsxs)(t.li,{children:["Add the code to derive the class from ",(0,s.jsx)(t.code,{children:"ViewModelBase"})," and make the class ",(0,s.jsx)(t.code,{children:"partial"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:"namespace Avalonia.MusicStore.ViewModels\n{\n    public partial class MusicStoreViewModel : ViewModelBase\n    {\n    }\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["This setup allows you to use attributes like ",(0,s.jsx)(t.code,{children:"[ObservableProperty]"}),", which automatically generate backing fields and property change notifications needed for UI binding."]}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["You can learn more about ",(0,s.jsx)(t.code,{children:"[ObservableProperty]"})," and ",(0,s.jsx)(t.code,{children:"INotifyPropertyChanged"})," ",(0,s.jsx)(t.a,{href:"/ru/docs/guides/data-binding/inotifypropertychanged",children:"here"}),"."]})}),"\n",(0,s.jsx)(t.p,{children:"At this stage, you will create two properties for the search application logic:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"A text string that is the search criteria,"}),"\n",(0,s.jsx)(t.li,{children:"A Boolean that indicates whether the search is busy."}),"\n"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Add the following properties using the  ",(0,s.jsx)(t.code,{children:"[ObservableProperty]"})," attribute:"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:"using CommunityToolkit.Mvvm.ComponentModel;\n\nnamespace Avalonia.MusicStore.ViewModels\n{\n    public partial class MusicStoreViewModel : ViewModelBase\n    {\n       [ObservableProperty] public partial string? SearchText { get; set; }\n        \n       [ObservableProperty] public partial bool IsBusy { get; private set; }\n    }\n}\n"})}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["Note that the partial property syntax was introduced in C# 13 Community Toolkit 8.4, visit ",(0,s.jsx)(t.a,{href:"/ru/docs/tutorials/music-store-app/creating-the-project",children:"here"})," for correct setup."]})}),"\n",(0,s.jsx)(t.h2,{id:"data-binding",children:"Data Binding"}),"\n",(0,s.jsx)(t.p,{children:"Next you will add a data binding to link the view to the view model. The text box will be bound to the search text, and whether the progress bar is visible to the user will  be bound to the Boolean."}),"\n",(0,s.jsx)(t.p,{children:"Follow this procedure to add data binding to the view:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Locate and open the ",(0,s.jsx)(t.strong,{children:"MusicStoreView.axaml"})," file."]}),"\n",(0,s.jsx)(t.li,{children:"Add the binding expressions shown:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-xml",children:'<UserControl ...\n    xmlns:vm="clr-namespace:Avalonia.MusicStore.ViewModels"\n    x:DataType="vm:MusicStoreViewModel">\n    \x3c!-- ... --\x3e\n    <DockPanel>\n      <StackPanel DockPanel.Dock="Top">\n          <TextBox Watermark="Search for Albums...." Text="{Binding SearchText}" />\n        <ProgressBar IsIndeterminate="True" IsVisible="{Binding IsBusy}" />\n      </StackPanel>\n      <Button Content="Buy Album"\n              DockPanel.Dock="Bottom"\n              HorizontalAlignment="Center" />\n      <ListBox/>\n    </DockPanel>\n    \x3c!-- ... --\x3e\n</UserControl>\n'})}),"\n",(0,s.jsx)(t.h2,{id:"album-search-and-selection",children:"Album Search and Selection"}),"\n",(0,s.jsx)(t.p,{children:"Your next step is to create the music store view model properties needed to process albums. These are:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"a collection of album view models to represent the albums that the search might find,"}),"\n",(0,s.jsx)(t.li,{children:"and a property to hold an album if the user selects one."}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Here you will use the ",(0,s.jsx)(t.code,{children:"ObservableCollection"})," - this is a collection is capable of notification, and it is provided by the .NET framework."]}),"\n",(0,s.jsx)(t.p,{children:"Follow this procedure to add the above properties:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Locate and open the ",(0,s.jsx)(t.strong,{children:"MusicStoreViewModel.cs"})," file."]}),"\n",(0,s.jsx)(t.li,{children:"Add the following code to the class:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:"[ObservableProperty] public partial AlbumViewModel? SelectedAlbum { get; set; }\n\npublic ObservableCollection<AlbumViewModel> SearchResults { get; } = new();\n"})}),"\n",(0,s.jsx)(t.p,{children:"Next to bind these properties to the list box in the view, follow this procedure:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Locate and open the ",(0,s.jsx)(t.strong,{children:"MusicStoreView.axaml"})," file."]}),"\n",(0,s.jsxs)(t.li,{children:["Add the binding expressions shown to the ",(0,s.jsx)(t.code,{children:"<ListBox>"})," element:"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-xml",children:'<ListBox ItemsSource="{Binding SearchResults}" SelectedItem="{Binding SelectedAlbum}" />\n'})}),"\n",(0,s.jsx)(t.h2,{id:"mock-data",children:"Mock Data"}),"\n",(0,s.jsx)(t.p,{children:"Now, to test the app at this stage, you will add some mock data directly to the view model."}),"\n",(0,s.jsx)(t.p,{children:"Follow this procedure:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Locate and open the ",(0,s.jsx)(t.strong,{children:"MusicStoreViewModel.cs"})," file again."]}),"\n",(0,s.jsx)(t.li,{children:"Add a constructor to the class, as shown:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-csharp",children:"public MusicStoreViewModel()\n{\n    SearchResults.Add(new AlbumViewModel());\n    SearchResults.Add(new AlbumViewModel());\n    SearchResults.Add(new AlbumViewModel());\n}\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Click ",(0,s.jsx)(t.strong,{children:"Debug"})," to compile and run the project."]}),"\n"]}),"\n",(0,s.jsx)("p",{children:(0,s.jsx)("img",{className:"image-medium-zoom",src:l,alt:""})}),"\n",(0,s.jsx)(t.p,{children:"This shows that the data binding from the list to the album collection in the view model is working, but the view is not graphical yet. On the next page you will develop the app further by replacing the text with graphical album tiles."})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>r});var i=n(96540);const s={},o=i.createContext(s);function l(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);