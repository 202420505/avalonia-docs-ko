"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[4470],{28876:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"components/webview/webauthenticationbroker","title":"WebAuthenticationBroker","description":"Overview","source":"@site/accelerate/components/webview/webauthenticationbroker.md","sourceDirName":"components/webview","slug":"/components/webview/webauthenticationbroker","permalink":"/ru/accelerate/components/webview/webauthenticationbroker","draft":false,"unlisted":false,"editUrl":"https://github.com/AvaloniaUI/avalonia-docs/tree/main/accelerate/components/webview/webauthenticationbroker.md","tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"NativeWebDialog","permalink":"/ru/accelerate/components/webview/nativewebdialog"},"next":{"title":"Frequently Asked Questions","permalink":"/ru/accelerate/components/webview/faq"}}');var r=n(74848),o=n(28453);const a={},s="WebAuthenticationBroker",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Static Methods",id:"static-methods",level:2},{value:"AuthenticateAsync",id:"authenticateasync",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"WebAuthenticationOptions",id:"webauthenticationoptions",level:2},{value:"Properties",id:"properties",level:3},{value:"WebAuthenticationResult",id:"webauthenticationresult",level:2},{value:"Properties",id:"properties-1",level:3},{value:"Usage Example",id:"usage-example",level:2},{value:"Platform Support",id:"platform-support",level:2}];function d(e){const t={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"webauthenticationbroker",children:"WebAuthenticationBroker"})}),"\n",(0,r.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"WebAuthenticationBroker"})," is a utility class that facilitates OAuth and other web-based authentication flows by providing a secure way to handle web authentication in desktop applications."]}),"\n",(0,r.jsx)(t.h2,{id:"static-methods",children:"Static Methods"}),"\n",(0,r.jsx)(t.h3,{id:"authenticateasync",children:"AuthenticateAsync"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"public static Task<WebAuthenticationResult> AuthenticateAsync(\n    TopLevel topLevel, WebAuthenticatorOptions options)\n"})}),"\n",(0,r.jsx)(t.p,{children:"Starts an authentication flow by navigating to the specified start URI and monitoring for navigation to the end URI."}),"\n",(0,r.jsx)(t.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"topLevel"}),": Owner top-level, a window on desktop platforms."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"options"}),": Authentication options that control the broker's behavior"]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(t.p,{children:["A ",(0,r.jsx)(t.code,{children:"Task<WebAuthenticationResult>"})," containing the authentication result."]}),"\n",(0,r.jsx)(t.h2,{id:"webauthenticationoptions",children:"WebAuthenticationOptions"}),"\n",(0,r.jsx)(t.h3,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"public Uri RequestUri { get; init; }\n"})}),"\n",(0,r.jsx)(t.p,{children:"The initial URI that starts the authentication flow."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"public Uri RedirectUri { get; init; }\n"})}),"\n",(0,r.jsx)(t.p,{children:"URI that indicates the completion of the authentication flow."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"public bool NonPersistent { get; init; }\n"})}),"\n",(0,r.jsx)(t.p,{children:"Hint for the platform implementation to not store any session data persistently."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"public bool PreferNativeWebDialog { get; init; }\n"})}),"\n",(0,r.jsxs)(t.p,{children:["If true, WebAuthenticationBroker will avoid platform specific implementation option, and will use ",(0,r.jsx)(t.a,{href:"/ru/accelerate/components/webview/nativewebdialog",children:"NativeWebDialog"})," based implementation."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"public Func<NativeWebDialog?> NativeWebDialogFactory { get; init; }\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Callback that can be used to override ",(0,r.jsx)(t.a,{href:"/ru/accelerate/components/webview/nativewebdialog",children:"NativeWebDialog"})," creation when WebAuthenticationBroker uses dialog implementation instead of system auth APIs."]}),"\n",(0,r.jsx)(t.h2,{id:"webauthenticationresult",children:"WebAuthenticationResult"}),"\n",(0,r.jsx)(t.h3,{id:"properties-1",children:"Properties"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"public Uri? CallbackUri { get; }\n"})}),"\n",(0,r.jsx)(t.p,{children:"The response URI containing authentication data."}),"\n",(0,r.jsx)(t.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,r.jsx)(t.p,{children:"Google OAuth is used in this example."}),"\n",(0,r.jsx)(t.p,{children:"As a minimal requirement for setup, follow:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Create Google credentials (Type: Desktop for Windows/macOS/Linux, or iOS). See ",(0,r.jsx)(t.a,{href:"https://console.cloud.google.com/apis/credentials",children:"Console Credentials"}),". On this step client ID and redirect URI are created."]}),"\n",(0,r.jsxs)(t.li,{children:["Follow google ",(0,r.jsx)(t.a,{href:"https://developers.google.com/identity/protocols/oauth2/web-server#httprest",children:"OAuth 2.0"})," documentation for general knowledge."]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:'var googleAuthRedirectUri = "http://localhost";\nvar googleAuthRequestUri = "https://accounts.google.com/o/oauth2/auth?response_type=code&access_type=offline&scope=openid";\ngoogleAuthRequestUri += "&client_id=" + /* YOUR CLIENT ID */;\ngoogleAuthRequestUri += "&redirect_uri=" + googleAuthRedirectUri;\n\nvar result = await WebAuthenticationBroker.AuthenticateAsync(\n    mainWindow,\n    new WebAuthenticatorOptions(\n        RequestUri: new Uri(googleAuthRequestUri),\n        RedirectUri: new Uri(googleAuthRedirectUri)));\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Similarly it can be done with ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow",children:"Microsoft identity"}),", ",(0,r.jsx)(t.a,{href:"https://developers.facebook.com/docs/facebook-login/",children:"Facebook Login"})," or other OAuth2 standard compatible options."]}),"\n",(0,r.jsx)(t.h2,{id:"platform-support",children:"Platform Support"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Feature"}),(0,r.jsx)(t.th,{children:"Windows"}),(0,r.jsx)(t.th,{children:"macOS (10.15+)"}),(0,r.jsx)(t.th,{children:"Linux"}),(0,r.jsx)(t.th,{children:"iOS (iOS 12.0+)"}),(0,r.jsx)(t.th,{children:"Android"}),(0,r.jsx)(t.th,{children:"Browser"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Platform Implementation"}),(0,r.jsx)(t.td,{children:"\u2716"}),(0,r.jsx)(t.td,{children:"\u2714*"}),(0,r.jsx)(t.td,{children:"\u2716"}),(0,r.jsx)(t.td,{children:"\u2714*"}),(0,r.jsx)(t.td,{children:"\u2714**"}),(0,r.jsx)(t.td,{children:"\u2714***"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"NativeWebDialog"}),(0,r.jsx)(t.td,{children:"\u2714"}),(0,r.jsx)(t.td,{children:"\u2714"}),(0,r.jsx)(t.td,{children:"\u2714"}),(0,r.jsx)(t.td,{children:"\u2716"}),(0,r.jsx)(t.td,{children:"\u2716"}),(0,r.jsx)(t.td,{children:"\u2716"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["* Apple platforms use ASWebAuthenticationSession implementation.",(0,r.jsx)(t.br,{}),"\n","** Android uses CustomTabsIntent implementation, but support is experimental and might be changed.",(0,r.jsx)(t.br,{}),"\n","*** Browser solution requires CORS to be configured to allow access to the redirected page."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var i=n(96540);const r={},o=i.createContext(r);function a(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);