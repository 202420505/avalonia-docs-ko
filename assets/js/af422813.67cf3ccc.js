"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[7214],{26240:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>m});const t=JSON.parse('{"id":"guides/graphics-and-animation/page-transitions/how-to-create-a-custom-page-transition","title":"How To Create a Custom Page Transition","description":"This guide will show you how to create your own custom page transition by implementing the IPageTransition interface.","source":"@site/docs/guides/graphics-and-animation/page-transitions/how-to-create-a-custom-page-transition.md","sourceDirName":"guides/graphics-and-animation/page-transitions","slug":"/guides/graphics-and-animation/page-transitions/how-to-create-a-custom-page-transition","permalink":"/avalonia-docs-ko/docs/guides/graphics-and-animation/page-transitions/how-to-create-a-custom-page-transition","draft":false,"unlisted":false,"editUrl":"https://github.com/202420505/avalonia-docs-ko/tree/main/docs/guides/graphics-and-animation/page-transitions/how-to-create-a-custom-page-transition.md","tags":[],"version":"current","lastUpdatedBy":"202420505","lastUpdatedAt":1755602100000,"frontMatter":{"id":"how-to-create-a-custom-page-transition","title":"How To Create a Custom Page Transition"},"sidebar":"documentationSidebar","previous":{"title":"Page Transition Combinations","permalink":"/avalonia-docs-ko/docs/guides/graphics-and-animation/page-transitions/page-transition-combinations"},"next":{"title":"Types of Control","permalink":"/avalonia-docs-ko/docs/guides/custom-controls/types-of-control"}}');var o=a(74848),i=a(28453);const r=a.p+"assets/images/custom-page-transition-07b8db42817a78df94e9c229b07b3557.webp",s={id:"how-to-create-a-custom-page-transition",title:"How To Create a Custom Page Transition"},l="How To Create a Custom Page Transition",c={},m=[{value:"Example",id:"example",level:2},{value:"More Information",id:"more-information",level:2}];function u(n){const e={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"how-to-create-a-custom-page-transition",children:"How To Create a Custom Page Transition"})}),"\n",(0,o.jsxs)(e.p,{children:["This guide will show you how to create your own custom page transition by implementing the ",(0,o.jsx)(e.code,{children:"IPageTransition"})," interface."]}),"\n",(0,o.jsx)(e.p,{children:"The interface has a single method that you need to implement:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:"public Task Start(Visual? from, Visual? to, bool forward, \n                                CancellationToken cancellationToken)\n{\n    // Setup the transition here.\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"example",children:"Example"}),"\n",(0,o.jsx)(e.p,{children:"This example will shrink the old view and then open up the new view vertically."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:'using Avalonia.VisualTree;\n\npublic class CustomTransition : IPageTransition\n{\n    /// <summary>\n    /// Initializes a new instance of the <see cref="CustomTransition"/> class.\n    /// </summary>\n    public CustomTransition()\n    {\n    }\n\n    /// <summary>\n    /// Initializes a new instance of the <see cref="CustomTransition"/> class.\n    /// </summary>\n    /// <param name="duration">The duration of the animation.</param>\n    public CustomTransition(TimeSpan duration)\n    {\n        Duration = duration;\n    }\n\n    /// <summary>\n    /// Gets the duration of the animation.\n    /// </summary>\n    public TimeSpan Duration { get; set; }\n\n    public async Task Start(Visual from, Visual to, bool forward, \n                                            CancellationToken cancellationToken)\n    {\n        if (cancellationToken.IsCancellationRequested)\n        {\n            return;\n        }\n\n        var tasks = new List<Task>();\n        var parent = GetVisualParent(from, to);\n        var scaleYProperty = ScaleTransform.ScaleYProperty;\n\n        if (from != null)\n        {\n            var animation = new Animation\n            {\n                FillMode = FillMode.Forward,\n                Children =\n                {\n                    new KeyFrame\n                    {\n                        Setters = { new Setter \n                        { Property = scaleYProperty, Value = 1d } },\n                        Cue = new Cue(0d)\n                    },\n                    new KeyFrame\n                    {\n                        Setters =\n                        {\n                            new Setter\n                            {\n                                Property = scaleYProperty,\n                                Value = 0d\n                            }\n                        },\n                        Cue = new Cue(1d)\n                    }\n                },\n                Duration = Duration\n            };\n            tasks.Add(animation.RunAsync(from, cancellationToken));\n        }\n\n        if (to != null)\n        {\n            to.IsVisible = true;\n            var animation = new Animation\n            {\n                FillMode = FillMode.Forward,\n                Children =\n                {\n                    new KeyFrame\n                    {\n                        Setters =\n                        {\n                            new Setter\n                            {\n                                Property = scaleYProperty,\n                                Value = 0d\n                            }\n                        },\n                        Cue = new Cue(0d)\n                    },\n                    new KeyFrame\n                    {\n                        Setters = { new Setter \n                        { \n                            Property = scaleYProperty, Value = 1d \n                        }},\n                        Cue = new Cue(1d)\n                    }\n                },\n                Duration = Duration\n            };\n            tasks.Add(animation.RunAsync(to, cancellationToken));\n        }\n\n        await Task.WhenAll(tasks);\n\n        if (from != null && !cancellationToken.IsCancellationRequested)\n        {\n            from.IsVisible = false;\n        }\n    }\n\n    /// <summary>\n    /// Gets the common visual parent of the two control.\n    /// </summary>\n    /// <param name="from">The from control.</param>\n    /// <param name="to">The to control.</param>\n    /// <returns>The common parent.</returns>\n    /// <exception cref="ArgumentException">\n    /// The two controls do not share a common parent.\n    /// </exception>\n    /// <remarks>\n    /// Any one of the parameters may be null, but not both.\n    /// </remarks>\n    private static Visual GetVisualParent(Visual? from, Visual? to)\n    {\n        var p1 = (from ?? to)!.GetVisualParent();\n        var p2 = (to ?? from)!.GetVisualParent();\n\n        if (p1 != null && p2 != null && p1 != p2)\n        {\n            throw new ArgumentException(\n                                "Controls for PageSlide must have same parent.");\n        }\n\n        return p1 ?? throw new InvalidOperationException(\n                                                "Cannot determine visual parent.");\n    }\n}\n'})}),"\n",(0,o.jsx)("img",{src:r,alt:""}),"\n",(0,o.jsx)(e.h2,{id:"more-information",children:"More Information"}),"\n",(0,o.jsx)(e.admonition,{type:"info",children:(0,o.jsxs)(e.p,{children:["For the complete API documentation about this interface see ",(0,o.jsx)(e.a,{href:"https://api-docs.avaloniaui.net/docs/T_Avalonia_Animation_IPageTransition",children:"here"}),"."]})}),"\n",(0,o.jsx)(e.admonition,{type:"info",children:(0,o.jsxs)(e.p,{children:["View the source code on ",(0,o.jsx)(e.em,{children:"GitHub"})," ",(0,o.jsx)(e.a,{href:"https://github.com/AvaloniaUI/Avalonia/blob/master/src/Avalonia.Base/Animation/IPageTransition.cs",children:(0,o.jsx)(e.code,{children:"IPageTransition.cs"})})]})})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(u,{...n})}):u(n)}},28453:(n,e,a)=>{a.d(e,{R:()=>r,x:()=>s});var t=a(96540);const o={},i=t.createContext(o);function r(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);