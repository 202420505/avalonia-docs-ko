"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[1354],{94706:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>d,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"tutorials/music-store-app/button-command","title":"Button Command","description":"TUTORIALS - Music Store App","source":"@site/docs/tutorials/music-store-app/button-command.md","sourceDirName":"tutorials/music-store-app","slug":"/tutorials/music-store-app/button-command","permalink":"/avalonia-docs-ko/docs/tutorials/music-store-app/button-command","draft":false,"unlisted":false,"editUrl":"https://github.com/202420505/avalonia-docs-ko/tree/main/docs/tutorials/music-store-app/button-command.md","tags":[],"version":"current","lastUpdatedBy":"Q","lastUpdatedAt":1755672260000,"frontMatter":{"description":"TUTORIALS - Music Store App"},"sidebar":"documentationSidebar","previous":{"title":"Add and Layout Controls","permalink":"/avalonia-docs-ko/docs/tutorials/music-store-app/add-and-layout-controls"},"next":{"title":"Open a Dialog","permalink":"/avalonia-docs-ko/docs/tutorials/music-store-app/opening-a-dialog"}}');var i=o(74848),a=o(28453);const d={description:"TUTORIALS - Music Store App"},s="Button Command",l={},r=[{value:"RelayCommand",id:"relaycommand",level:2},{value:"How it works",id:"how-it-works",level:3},{value:"Why it is <code>AddAlbumCommand</code>?",id:"why-it-is-addalbumcommand",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"button-command",children:"Button Command"})}),"\n",(0,i.jsx)(n.p,{children:"So far in this tutorial, you have altered only files from the view part of the MVVM pattern (for the main window and app). On this page you will learn how to link the button in the view for the main window, to a command in the view model. This will cause user interaction with the view (in this case a button click) to have an effect in the application logic of the view model."}),"\n",(0,i.jsxs)(n.p,{children:["When you develop with ",(0,i.jsx)(n.em,{children:"Avalonia UI"})," and the MVVM pattern, the solution template will give you a choice of MVVM toolkits. This tutorial now uses ",(0,i.jsx)(n.em,{children:"CommunityToolkit.Mvvm"}),", and the solution template has already added the necessary packages."]}),"\n",(0,i.jsx)(n.h2,{id:"relaycommand",children:"RelayCommand"}),"\n",(0,i.jsxs)(n.p,{children:["The first step in linking the view and view model is to make the view model able to accept a command. You will achieve this by adding a method to the main window view model and decorating it with the ",(0,i.jsx)(n.code,{children:"[RelayCommand]"})," attribute, which will generate a bindable ",(0,i.jsx)(n.code,{children:"ICommand"})," property, which can be referenced from your view.\nFollow this procedure:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Stop the app if it is still running."}),"\n",(0,i.jsxs)(n.li,{children:["Locate and open the ",(0,i.jsx)(n.strong,{children:"MainWindowViewModel.cs"})," file in the ",(0,i.jsx)(n.strong,{children:"/ViewModels"})," folder."]}),"\n",(0,i.jsx)(n.li,{children:"Delete the existing content of the class, and add the code shown:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"using CommunityToolkit.Mvvm.ComponentModel;\nusing CommunityToolkit.Mvvm.Input;\nusing System.Threading.Tasks;\n\nnamespace Avalonia.MusicStore.ViewModels\n{\n    public partial class MainWindowViewModel : ObservableObject\n    {\n        public MainWindowViewModel()\n        {\n            // ViewModel initialization logic.\n        }\n\n        [RelayCommand]\n        private async Task AddAlbumAsync()\n        {\n            // Code here will be executed when the button is clicked.\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"how-it-works",children:"How it works"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"[RelayCommand]"})," attribute generates a public property for you at compile time named ",(0,i.jsx)(n.code,{children:"AddAlbumCommand"}),", which implements ",(0,i.jsx)(n.code,{children:"ICommand"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This means that even though you only wrote a method named ",(0,i.jsx)(n.code,{children:"AddAlbumAsync"}),", Avalonia's data-binding system can bind directly to ",(0,i.jsx)(n.code,{children:"AddAlbumCommand"})," in your AXAML \u2014 without you writing any boilerplate command logic."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Now place a debug breakpoint at the opening curly brace inside the ",(0,i.jsx)(n.code,{children:"AddAlbumAsync()"})," method."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["To complete the link from the view to your new ",(0,i.jsx)(n.code,{children:"AddAlbumAsync"})," view model property, you will add a data binding to the button."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["For more information about the concept of data binding, see ",(0,i.jsx)(n.a,{href:"../../basics/data/data-binding",children:"here"}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"To add the button data binding, follow this procedure:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Locate and open the ",(0,i.jsx)(n.strong,{children:"MainWindow.axaml"})," file."]}),"\n",(0,i.jsx)(n.li,{children:"Find the XAML for the button and add the command attribute and binding, as shown:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<Button HorizontalAlignment="Right" VerticalAlignment="Top"\n        Command="{Binding AddAlbumCommand}">\n    <PathIcon Data="{StaticResource store_microsoft_regular}"/>\n</Button>\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"why-it-is-addalbumcommand",children:["Why it is ",(0,i.jsx)(n.code,{children:"AddAlbumCommand"}),"?"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"[RelayCommand]"})," attribute automatically generates command properties based on your method names. If your method name ends with ",(0,i.jsx)(n.em,{children:"Async"}),", the generator removes the ",(0,i.jsx)(n.em,{children:"Async"})," suffix and appends ",(0,i.jsx)(n.em,{children:"Command"})," to form the property name.\nIf the method returns a Task, ",(0,i.jsx)(n.code,{children:"[RelayCommand]"})," automatically generates an ",(0,i.jsx)(n.code,{children:"IAsyncRelayCommand"})," instead of a regular ",(0,i.jsx)(n.code,{children:"IRelayCommand"}),", giving you full support for asynchronous execution.\nThis means:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If your method is named ",(0,i.jsx)(n.code,{children:"AddAlbumAsync"}),", the generated property will be called ",(0,i.jsx)(n.code,{children:"AddAlbumCommand"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["If your method is named ",(0,i.jsx)(n.code,{children:"AddAlbum"}),", it also becomes ",(0,i.jsx)(n.code,{children:"AddAlbumCommand"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["Learn more about asynchronous ",(0,i.jsx)(n.code,{children:"RelayCommand"})," generation in the official docs ",(0,i.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/dotnet/communitytoolkit/mvvm/generators/relaycommand#asynchronous-commands",children:"here"}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Command"})," property of an ",(0,i.jsx)(n.em,{children:"Avalonia UI"})," button determines what happens when the button is clicked. In this case it binds to the ",(0,i.jsx)(n.code,{children:"AddAlbumCommand"})," generated in your view model, causing the ",(0,i.jsx)(n.code,{children:"AddAlbumAsync"})," method to run."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Debug"})," to compile and run the project."]}),"\n",(0,i.jsx)(n.li,{children:"Click the icon button."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"You will see the app stop executing at the breakpoint you previously set in the view model."}),"\n",(0,i.jsx)(n.p,{children:"On the next page, you will create a new dialog window, and then add some code to display it (where the breakpoint currently is in the view model)."})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>d,x:()=>s});var t=o(96540);const i={},a=t.createContext(i);function d(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);