"use strict";(self.webpackChunkavalonia_docs=self.webpackChunkavalonia_docs||[]).push([[7872],{43482:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"concepts/reactiveui/view-activation","title":"View Activation","description":"CONCEPTS - ReactiveUI","source":"@site/docs/concepts/reactiveui/view-activation.md","sourceDirName":"concepts/reactiveui","slug":"/concepts/reactiveui/view-activation","permalink":"/docs/concepts/reactiveui/view-activation","draft":false,"unlisted":false,"editUrl":"https://github.com/AvaloniaUI/avalonia-docs/tree/main/docs/concepts/reactiveui/view-activation.md","tags":[],"version":"current","lastUpdatedBy":"202420505","lastUpdatedAt":1755588461000,"frontMatter":{"description":"CONCEPTS - ReactiveUI"},"sidebar":"documentationSidebar","previous":{"title":"Reactive Command","permalink":"/docs/concepts/reactiveui/reactive-command"},"next":{"title":"Routing","permalink":"/docs/concepts/reactiveui/routing"}}');var a=t(74848),o=t(28453);const c={description:"CONCEPTS - ReactiveUI"},s="View Activation",d={},l=[{value:"Activation Example",id:"activation-example",level:3},{value:"Code-Behind ReactiveUI Bindings",id:"code-behind-reactiveui-bindings",level:3}];function r(e){const i={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.header,{children:(0,a.jsx)(i.h1,{id:"view-activation",children:"View Activation"})}),"\n",(0,a.jsxs)(i.p,{children:["For the ",(0,a.jsx)(i.a,{href:"https://reactiveui.net/docs/handbook/when-activated/",children:"WhenActivated"})," ReactiveUI feature to work, you need to use custom base classes from the ",(0,a.jsx)(i.code,{children:"Avalonia.ReactiveUI"})," package, such as ",(0,a.jsx)(i.code,{children:"ReactiveWindow<TViewModel>"})," or ",(0,a.jsx)(i.code,{children:"ReactiveUserControl<TViewModel>"}),". Of course, you can also implement the ",(0,a.jsx)(i.code,{children:"IViewFor<TViewModel>"})," interface by hand in your class, but make sure you store the ",(0,a.jsx)(i.code,{children:"ViewModel"})," in an ",(0,a.jsx)(i.code,{children:"AvaloniaProperty"}),"."]}),"\n",(0,a.jsx)(i.h3,{id:"activation-example",children:"Activation Example"}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.strong,{children:"ViewModel.cs"})}),"\n",(0,a.jsxs)(i.p,{children:["This view model implements the ",(0,a.jsx)(i.code,{children:"IActivatableViewModel"})," interface. When the corresponding view gets attached to the visual tree, the code inside the WhenActivated block will get called. When the corresponding view gets detached from the visual tree, the composite disposable will be disposed. ",(0,a.jsx)(i.code,{children:"ReactiveObject"})," is the base class for ",(0,a.jsx)(i.a,{href:"https://reactiveui.net/docs/handbook/view-models/",children:"view model classes"}),", and it implements ",(0,a.jsx)(i.code,{children:"INotifyPropertyChanged"}),"."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-csharp",children:"public class ViewModel : ReactiveObject, IActivatableViewModel\n{\n    public ViewModelActivator Activator { get; }\n\n    public ViewModel()\n    {\n        Activator = new ViewModelActivator();\n        this.WhenActivated((CompositeDisposable disposables) =>\n        {\n            /* handle activation */\n            Disposable\n                .Create(() => { /* handle deactivation */ })\n                .DisposeWith(disposables);\n        });\n    }\n}\n"})}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.strong,{children:"View.xaml"})}),"\n",(0,a.jsx)(i.p,{children:"This is the UI for the view model you see above."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-xml",children:'<Window xmlns="https://github.com/avaloniaui"\n        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"\n        Background="#f0f0f0" FontFamily="Ubuntu"\n        MinHeight="590" MinWidth="750">\n  <TextBlock Text="Hello, world!" />\n</Window>\n'})}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.strong,{children:"View.xaml.cs"})}),"\n",(0,a.jsxs)(i.p,{children:["This is the code-behind for the ",(0,a.jsx)(i.code,{children:"View.xaml"})," file you see above. Remember to always put a call to ",(0,a.jsx)(i.code,{children:"WhenActivated"})," into your View constructor, otherwise ReactiveUI won't be able to determine when the view model gets activated."]}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-csharp",children:"public class View : ReactiveWindow<ViewModel>\n{\n    public View()\n    {\n        // ViewModel's WhenActivated block will also get called.\n        this.WhenActivated(disposables => { /* Handle view activation etc. */ });\n        AvaloniaXamlLoader.Load(this);\n    }\n}\n"})}),"\n",(0,a.jsx)(i.h3,{id:"code-behind-reactiveui-bindings",children:"Code-Behind ReactiveUI Bindings"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-csharp",children:"public class View : ReactiveWindow<ViewModel>\n{\n    // Assume the Button control has the Name=\"ExampleButton\" attribute defined in XAML.\n    public View()\n    {\n        this.WhenActivated(disposables => \n        {\n            // Bind the 'ExampleCommand' to 'ExampleButton' defined above.\n            this.BindCommand(ViewModel, x => x.ExampleCommand, x => x.ExampleButton)\n                .DisposeWith(disposables);\n        });\n        AvaloniaXamlLoader.Load(this);\n    }\n}\n"})})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(r,{...e})}):r(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>c,x:()=>s});var n=t(96540);const a={},o=n.createContext(a);function c(e){const i=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),n.createElement(o.Provider,{value:i},e.children)}}}]);